<!-- Google Consent Mode (v2) -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}

  // Default consent to 'denied' as per GDPR
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'ad_user_data': 'denied',
    'ad_personalization': 'denied',
    'analytics_storage': 'denied'
  });
</script>

<!-- Simple Cookie Consent Banner -->
<style>
  #cookie-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #2c3e50;
    color: #fff;
    padding: 20px;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
    z-index: 9999;
    display: none;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  }

  #cookie-banner.show {
    display: block;
  }

  .cookie-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 15px;
  }

  .cookie-text {
    flex: 1;
    min-width: 300px;
    font-size: 14px;
    line-height: 1.5;
  }

  .cookie-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .cookie-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s;
  }

  .cookie-btn-accept {
    background: #27ae60;
    color: white;
  }

  .cookie-btn-accept:hover {
    background: #229954;
  }

  .cookie-btn-reject {
    background: #95a5a6;
    color: white;
  }

  .cookie-btn-reject:hover {
    background: #7f8c8d;
  }

  @media (max-width: 768px) {
    .cookie-content {
      flex-direction: column;
      text-align: center;
    }

    .cookie-buttons {
      width: 100%;
      justify-content: center;
    }
  }
</style>

<div id="cookie-banner">
  <div class="cookie-content">
    <div class="cookie-text">
      üç™ This website uses cookies to enhance your experience and analyze site traffic. By clicking "Accept", you consent to the use of analytics cookies.
    </div>
    <div class="cookie-buttons">
      <button class="cookie-btn cookie-btn-reject" onclick="rejectCookies()">Reject</button>
      <button class="cookie-btn cookie-btn-accept" onclick="acceptCookies()">Accept</button>
    </div>
  </div>
</div>

<script>
  // Check if user has already made a choice
  function getCookie(name) {
    var value = "; " + document.cookie;
    var parts = value.split("; " + name + "=");
    if (parts.length == 2) return parts.pop().split(";").shift();
  }

  function setCookie(name, value, days) {
    var expires = "";
    if (days) {
      var date = new Date();
      date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
      expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "") + expires + "; path=/; SameSite=Lax";
  }

  function acceptCookies() {
    // Update consent mode
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });

    // Save user choice
    setCookie('cookie_consent', 'accepted', 365);

    // Hide banner
    document.getElementById('cookie-banner').classList.remove('show');
  }

  function rejectCookies() {
    // Keep consent denied (default)
    gtag('consent', 'update', {
      'analytics_storage': 'denied'
    });

    // Save user choice
    setCookie('cookie_consent', 'rejected', 365);

    // Hide banner
    document.getElementById('cookie-banner').classList.remove('show');
  }

  // Show banner if no consent has been given
  window.addEventListener('load', function() {
    var consent = getCookie('cookie_consent');

    if (!consent) {
      // No consent recorded, show banner
      document.getElementById('cookie-banner').classList.add('show');
    } else if (consent === 'accepted') {
      // User previously accepted, grant consent
      gtag('consent', 'update', {
        'analytics_storage': 'granted'
      });
    }
    // If rejected, consent stays denied (default)
  });
</script>
